## **数据联动（关联其他表单数据，并根据设置条件获取指定数据）**
-----
* 支持控件：<br/>
 **`单选按钮组、下拉框、关联数据、成员单选、部门单选、数字、日期、提交时间、更新时间、地址、定位、下拉复选框、复选框组、流程状态、流程当前节点、流程当前负责人、流程决策、图片、附件、手写签名`**

* 数据联动条件(如下图)：

<table>
	<tbody>
		<tr>
			<th>类型</th>
			<th>控件类型</th>
			<th>操作类型</th>
			<th>联动值类型</th>
			<th>备注</th>
		</tr>
		<tr>
			<td rowspan="12">常规字段</td>
			<td>单行文本</td>
			<td rowspan="4">等于、不等于、包含、不包含、为空、不为空</td>
			<td rowspan="4">控件值或固定值</td>
			<td rowspan="4">包含、不包含：必须所选条件同时包含或不包含</td>
		</tr>
		<tr>
			<td>单选按钮组</td>
		</tr>
		<tr>
			<td>下拉框</td>
		</tr>
		<tr>
			<td>关联数据</td>
		</tr>
		<tr>
			<td>成员单选</td>
			<td>等于、不等于、为空、不为空</td>
			<td>控件值或常量（固定值、当前用户）</td>
			<td></td>
		</tr>
		<tr>
			<td>部门单选</td>
			<td>等于、不等于、为空、不为空</td>
			<td>控件值或常量（固定值、当前用户所在部门『和部门控件获取部门一致』）</td>
			<td></td>
		</tr>
		<tr>
			<td>数字</td>
			<td>等于、不等于、大于、大于等于、小于、小于等于、为空、不为空</td>
			<td>控件值或固定值</td>
			<td></td>
		</tr>
		<tr>
			<td>日期</td>
			<td>等于、不等于、大于、大于等于、小于、小于等于、为空、不为空</td>
			<td>控件值或常量（固定值、今天、昨天、本周、上周、过去七天、本月、上月、今年）</td>
			<td></td>
		</tr>
		<tr>
			<td>地址</td>
			<td>属于、不属于、为空、不为空</td>
			<td>控件值或固定值</td>
			<td></td>
		</tr>
		<tr>
			<td>定位</td>
			<td>属于、不属于、为空、不为空</td>
			<td>控件值或固定值</td>
			<td>定位控件不能做为联动的值(当前表单控件，即不可关联本表)</td>
		</tr>
		<tr>
			<td>下拉复选框</td>
			<td rowspan="2">包含、不包含、为空、不为空</td>
			<td rowspan="2">控件值或固定值</td>
			<td rowspan="2">包含、不包含：必须所选条件同时包含或不包含</td>
		</tr>
		<tr>
			<td>复选框组</td>
		</tr>
		<tr>
			<td rowspan="2">常规系统字段</td>
			<td>提交时间</td>
			<td rowspan="2">等于、不等于、大于、大于等于、小于、小于等于、为空、不为空</td>
			<td rowspan="2">控件值或常量（固定值、今天、昨天、本周、上周、过去七天、本月、上月、今年）</td>
			<td rowspan="2"></td>
		</tr>
		<tr>
			<td>更新时间</td>
		</tr>
		<tr>
			<td rowspan="4">流程系统字段</td>
			<td>流程状态</td>
			<td rowspan="4">包含、不包含</td>
			<td>常量（进行中、流程结束、手动结束）</td>
			<td rowspan="4">包含、不包含：必须所选条件同时包含或不包含</td>
		</tr>
		<tr>
			<td>流程当前节点</td>
			<td>常量（从关联表中获取的当前激活流程版本的流程节点信息）</td>
		</tr>
		<tr>
			<td>流程当前负责人</td>
			<td>常量（固定值：为某一成员，可多选）</td>
		</tr>
		<tr>
			<td>流程决策</td>
			<td>常量（未处理、通过、拒绝）</td>
		</tr>
	</tbody>
</table>

!> **注意事项：**<br/>
 ① 设置多个数据联动条件时，必须设置一个当前表字段做为数据联动的触发字段。<br/>
 ②右侧的当前表字段不能全部是常量值，必须包含一个控件值。<br/>

### 如何设置
以【单行文本】为例。

**联动条件字段创建：**【创建[下拉框]（标题：进货商品名称）】——【选项】——【关联其他表单】——【商品信息—商品名称】

![](../img/6-4-3i1.gif)

**联动字段创建：** 【创建[单行文本]（标题：商品规格）】——【控件属性】——【默认值】——【数据联动】——【数据联动设置】

![](../img/6-4-3i2.gif)

数据联动设置页面详解：
* **1.数据关联表：** 需要获取数据到本表的表单。

![](../img/6-4-3i3.png)

* **2.判断条件：** 当前表单【进货商品名称】选项值与关联表单【商品信息】中【商品名称】控件值相等。

![](../img/6-4-3i4.png)

* **3.获取对象：** 当判断条件成立时，【商品规格】的值为关联表单【商品信息】中【商品规格】的控件值。

![](../img/6-4-3i5.png)

* **4.支持多条件联动：** 我们发现很多时候，因为数据联动条件只支持单条件，我们要拿聚合表数据的时候，要用一些很畸形的办法获取到精准的数据，这里主要是因为联动条件只支持单条件引起的，所以我们加入了联动条件多条件的支持[【多条件联动使用】](6-4-3-1多条件联动使用.md)

![](../img/6-4-3i6.png)

### 效果预览
* **1、被关联的【商品信息】表单总数据**

![](../img/6-4-3i7.png)

* **2、联动到的数据展示**<br/>
每次更换商品名称之后，都会重新联动到相关规格的数据并填写。

![](../img/6-4-3i8.gif)

### 常见用法

第一个下拉框选择江苏省，第二个下拉框只能选择江苏省对应的城市；
第一个下拉框选择浙江省，第二个下拉框只能选择浙江省对应的城市。
或者选择了某个商品名称或编号后，下面的空格自动填入该商品的价格。

这样的应用就是数据联动。

!> **注意：当子表单有外层数据联动，和子表单里面的控件有数据联动，当他们会同时触发时，只会触发子表单外层的数据联动。**

更多效果参考：[【多级联动】](6-4-4多级联动.md ':target=_blank')