
[TOC]



聚合表，可以对数据进行聚合计算。

聚合表的作用，是对已有的表单数据进行预计算（预处理），以备进一步调用。

目前，表单可以通过数据联动、关联查询和关联数据，去调用聚合表中的数据。

## 1. 设置方法

聚合表的做法与汇总表相似，新建聚合表之后，设置多表关联、添加维度和指标，即完成设置。

指标暂时只支持汇总指标，汇总指标中的运算符只支持字段之间的加减。

## 2. 数据提交校验

（1）校验条件为等式或者不等式，支持 `<,  >,  ==,  >=, <=, !=`，运算符号支持 `+,  -, *, /, ( )`，公式中可以引用聚合表指标的值、也可以使用数字。

（2）每一项校验规则，可以设定提示信息。在校验不满足时会出现相应的提示信息。

（3）聚合表调用了哪些表单，在对这些表单数据操作时，部分操作会触发聚合表校验。具体见下图：

|操作|	是否触发|
|---|---|
|新建|	√ |
|编辑	| √ |
|单条数据删除	| √ |
|勾选多条数据删除	| √ |
|导入|	× |
|批量编辑|	× |
|清空数据|	× |

## 3. 聚合表 VS 报表

聚合表与报表相比，最大的不同在于聚合表中的数据可以被调用到表单中。

如进销存场景，计算出的当前库存调用到出库表中，以实时掌握最新库存，避免出现负库存

## 4. 调用聚合表数据

聚合表的数据可以通过数据联动功能、关联数据控件和关联查询控件来调用。区别在于是否入库，大家可以根据需要自行选择。

### （1）数据联动

手动添加控件，诸如下拉框，单行文本，数字等。然后对这些字段设置数据联动，联动到聚合表，可以实时调取聚合表的数据，并且随表单一起提交入库。

### （2）关联数据控件、关联查询控件

通过关联限定条件的值，动态显示出关联数据所设置的“显示字段”。这些数据都是存在别的表单或者聚合表中的，不会随着当前表单一起提交入库。

### （3）入库概念

入库就是，把这个值随着表单一起，提交到数据管理中。如果不进行人为的改动，这个值是不会变的，就算之前调用的那条数据已经产生了变化，这个入库的值也不会变化。

不入库是指，这个数据每次需要显示的时候，都去读取一下被调用的表单或聚合表的数据，是实时的。入库的数据可以参与表单计算（公式等），不入库的数据可以实时更新。