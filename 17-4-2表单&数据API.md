[TOC]

## 开发准备
> 开发前，请仔细阅读[开发指南](https://doc.baibaoyun.com/doc/10396)

**注：以下所有接口路径中的`app_id`和`entry_id`分别表示应用ID和该应用内的表单ID，因此`app_id+entry_id`表示全局唯一的表单ID，前往系统管理中的API文档进行查看。**

## 应用举例
### API & 订单管理
在百宝云中建立了一个订单表单，用于统计订单信息。销售渠道一般分为线上商城销售和线下销售，线下销售通常需要销售手动在百宝云中录入订单。但是线上渠道用户自主下单后会生成一个订单，此时这个订单可以通过`新增单条数据API接口`直接在百宝云中生成一条订单记录，这样我们就不需要一个人专门把网上的订单一条条手动录入百宝云。手动录入不仅工作量很大，而且容易出错。

### API & 项目管理
当使用百宝云做项目管理流程控制时，一般财务收款都是有单独的一套系统，此时可以通过`修改单条数据API接口`将财务软件中的收款信息推送到百宝云来，从而修改对应的项目信息。

## 字段别名
字段别名（控件别名）默认为系统自动生成的数值字符串，可以修改。

## 表单API
### POST - /api/v1/app/{app_id}/entry/{entry_id}/widgets  表单字段查询接口

获取指定表单的控件/字段信息，除`分割线`控件和`关联查询`控件以外。具体可以查阅文档最后的 控件与数据类型对照表

**请求参数：** 无

**响应内容：**

<table width="345">
    <colgroup>
        <col width="155" style="width:116.25pt;"/>
        <col width="306" style="width:229.50pt;"/>
    </colgroup>
    <tbody>
        <tr style="height:15.00pt;" class="firstRow">
            <td class="et2" width="116" style="">
                参数
            </td>
            <td class="et2" width="229" style="">
                含义
            </td>
        </tr>
        <tr style="height:15.75pt;">
            <td class="et3" width="116" style="">
                widgets
            </td>
            <td class="et4" width="229" style="">
                控件信息
            </td>
        </tr>
        <tr style="height:15.75pt;">
            <td class="et5" width="116" style="">
                widgets[].name
            </td>
            <td class="et6" width="229" style="">
                控件别名
            </td>
        </tr>
        <tr style="height:15.75pt;">
            <td class="et3" width="116" style="">
                widgets[].title
            </td>
            <td class="et4" width="229" style="">
                控件标题
            </td>
        </tr>
        <tr style="height:29.25pt;">
            <td class="et5" width="116" style="">
                widgets[].type
            </td>
            <td class="et6" width="229" style="">
                控件类型；每种控件类型都有对应的数据类型
            </td>
        </tr>
        <tr style="height:29.25pt;">
            <td class="et3" width="116" style="">
                widgets[].data
            </td>
            <td class="et4" width="229" style="">
                仅子表单控件有；数组里包含了每个子控件的信息
            </td>
        </tr>
    </tbody>
</table>


**响应数据样例：**


~~~
{
    "widgets": [
        {
            "name": "_widget_1558765248187",
            "title": "单行文本",
            "type": "text"
        },
        {
            "name": "多行文本",
            "title": "多行文本",
            "type": "textarea"
        },
        {
            "name": "数字",
            "title": "数字",
            "type": "number"
        },
        {
            "name": "日期时间",
            "title": "日期时间",
            "type": "datetime"
        },
        {
            "name": "单选按钮组",
            "title": "单选按钮组",
            "type": "radiogroup"
        },
        {
            "name": "复选框组",
            "title": "复选框组",
            "type": "checkboxgroup"
        },
        {
            "name": "下拉复选框",
            "title": "下拉复选框",
            "type": "combocheck"
        },
        {
            "name": "下拉框",
            "title": "下拉框",
            "type": "combo"
        },
        {
            "name": "定位",
            "title": "定位",
            "type": "location"
        },
        {
            "name": "地址",
            "title": "地址",
            "type": "address"
        },
        {
            "name": "_widget_1558929030197",
            "title": "附件",
            "type": "upload"
        },
        {
            "name": "图片",
            "title": "图片",
            "type": "image"
        },
        {
            "name": "子表单",
            "title": "子表单",
            "type": "subform",
            "data": [
                {
                    "name": "子表单单行文本",
                    "title": "单行文本",
                    "type": "text"
                },
                {
                    "name": "子表单多行文本",
                    "title": "多行文本",
                    "type": "textarea"
                }
            ]
        },
        {
            "name": "_widget_1558929030271",
            "title": "关联数据",
            "type": "linkdata"
        },
        {
            "name": "_widget_1558929030284",
            "title": "手写签名",
            "type": "signature"
        },
        {
            "name": "成员单选",
            "title": "成员单选",
            "type": "user"
        },
        {
            "name": "成员多选",
            "title": "成员多选",
            "type": "usergroup"
        },
        {
            "name": "部门单选",
            "title": "部门单选",
            "type": "dept"
        },
        {
            "name": "部门多选",
            "title": "部门多选",
            "type": "deptgroup"
        }
    ]
}
~~~
## 数据API
### POST - /api/v1/app/{app_id}/entry/{entry_id}/data 查询多条数据接口

该接口的返回数据，始终`按照提交时间正序排列`。

**请求参数：**

<table width="841">
    <colgroup>
        <col width="137" style="width:102.75pt;"/>
        <col width="483" style="width:362.25pt;"/>
        <col width="72" style="width:54.00pt;"/>
        <col width="430" style="width:322.50pt;"/>
    </colgroup>
    <tbody>
        <tr style="height:14.25pt;" class="firstRow">
            <td width="102" style="">
                参数
            </td>
            <td width="22" style="">
                必需
            </td>
            <td width="84" style="">
                类型
            </td>
            <td width="322" style="">
                说明
            </td>
        </tr>
        <tr style="height:14.25pt;">
            <td style="">
                data_id
            </td>
            <td></td>
            <td>
                String
            </td>
            <td>
                上一次查询数据结果的最后一条数据的ID，没有则留空
            </td>
        </tr>
        <tr style="height:14.25pt;">
            <td style="">
                fields
            </td>
            <td></td>
            <td>
                Array
            </td>
            <td>
                需要查询的数据字段
            </td>
        </tr>
        <tr style="height:14.25pt;">
            <td style="">
                filter
            </td>
            <td></td>
            <td>
                JSON
            </td>
            <td>
                数据筛选器
            </td>
        </tr>
        <tr style="height:14.25pt;">
            <td style="">
                limit
            </td>
            <td></td>
            <td>
                Number
            </td>
            <td>
                查询的数据条数，1~100，默认100
            </td>
        </tr>
    </tbody>
</table>

**请求示例：**
~~~
{
    "data_id":"53b6b1251b4eab93d38cb33b",
    "fields":["_widget_1558765248187","多行文本","数字","子表单"],
    "limit":10,
    "filter":{
        "rel": "and",
        "cond": [
            {
                "field":"creator",
                "method":"in",
                "value":["575ffc5e885898ce0d2afe41", "56979d1d1eea475f2848249b"]
            },
            {
                "field": "_widget_1558765248187",
                "method": "eq",
                "value":[454],
                "hasEmpty":true
            },
            {
                "field":"数字",
                "method":"ne",
                "value":[666]
            }
        ]
    }
}

~~~

<br>

**响应参数：**

<table width="561">
    <colgroup>
        <col width="137" style="width:102.75pt;"/>
        <col width="483" style="width:362.25pt;"/>
        <col width="128" style="width:96.00pt;"/>
    </colgroup>
    <tbody>
        <tr style="height:14.25pt;" class="firstRow">
            <td width="102" style="">
                参数
            </td>
            <td width="362" style="">
                类型
            </td>
            <td width="96" style="">
                说明
            </td>
        </tr>
        <tr style="height:14.25pt;">
            <td style="">
                data
            </td>
            <td>
                Array
            </td>
            <td>
                多条数据的集合
            </td>
        </tr>
    </tbody>
</table>

<br>

**响应数据样例：**
~~~
{
	"data": [
		{
			"appId": "539543cee19942ea8bb5e744",
			"entryId": "56af3c8b7f7f039c93108be8",
			"_id": "5bb6e4e013d46e148a9da655",
			"_widget_1558765248187": "454",
			"多行文本": "sdfsdf",
			"数字": "-666.55"
		},
		{
			"appId": "539543cee19942ea8bb5e744",
			"entryId": "56af3c8b7f7f039c93108be8",
			"_id": "5bbfe3ab42ba31e44c5be199",
			"_widget_1558765248187": "454",
			"多行文本": "sdfsdf",
			"数字": "-666.55"
		}
	]
}

~~~

> 请注意： 查询到的数据内容中，除了控件字段以外，还有一些系统字段

如下表：

<table width="1197" style="width: 828px;">
    <colgroup>
        <col width="181" style="width:135.75pt;"/>
        <col width="69" style="width:51.75pt;"/>
        <col width="513" style="width:384.75pt;"/>
        <col width="592" style="width:444.00pt;"/>
        <col width="241" style="width:180.75pt;"/>
    </colgroup>
    <tbody>
        <tr style="height:15.00pt;" class="firstRow">
            <td class="et2" width="135" style="">
                系统字段
            </td>
            <td class="et2" width="175" style="">
                字段别名
            </td>
            <td class="et2" width="384" style="">
                数据类型
            </td>
            <td class="et2" width="444" style="">
                数据样例
            </td>
            <td class="et2" width="180" style="">
                备注
            </td>
        </tr>
        <tr style="height:16.00pt;">
            <td class="et3" width="135" style="">
                appId
            </td>
            <td class="et3" width="51" style="">
                appId
            </td>
            <td class="et3" width="384" style="">
                String
            </td>
            <td class="et3" width="444" style="">
                “539543cee19942ea8bb5e744”
            </td>
            <td class="et3" width="180" style="">
                appId+entryId<span class="font0">保证表单</span><span class="font2">ID</span><span class="font0">的唯一性</span>
            </td>
        </tr>
        <tr style="height:15.00pt;">
            <td class="et4" width="135" style="">
                entryId
            </td>
            <td class="et4" width="51" style="">
                entryId
            </td>
            <td class="et4" width="384" style="">
                String
            </td>
            <td class="et4" width="444" style="">
                “50dafd850f3fc191513f2f21”
            </td>
            <td class="et4" width="180" style="">
                appId+entryId<span class="font0">保证表单</span><span class="font2">ID</span><span class="font0">的唯一性</span>
            </td>
        </tr>
        <tr style="height:18.00pt;">
            <td class="et5" width="135" style="">
                数据<span class="font2">ID</span>
            </td>
            <td class="et3" width="51" style="">
                _id
            </td>
            <td class="et3" width="384" style="">
                String
            </td>
            <td class="et3" width="444" style="">
                “5bb6e4e013d46e148a9da655”
            </td>
            <td class="et5" width="180" style="">
                全局唯一
            </td>
        </tr>
        <tr style="height:15.00pt;">
            <td class="et5" width="135" style="">
                提交时间
            </td>
            <td class="et3" width="51" style="">
                String
            </td>
            <td class="et3" width="384" style="">
                “2019-01-01 10:10:10”
            </td>
            <td class="et3" width="444" style=""></td>
            <td class="et3" width="180" style=""></td>
        </tr>
        <tr style="height:19.00pt;">
            <td class="et6" width="135" style="">
                提交人
            </td>
            <td class="et4" width="51" style="">
                JSON
            </td>
            <td class="et4" width="384" style="">
                {&quot;_id&quot;: “575ffc5e885898ce0d2afe41”, “name”: “<span class="font0">小云</span><span class="font2">”}</span>
            </td>
            <td class="et4" width="444" style=""></td>
            <td class="et4" width="180" style=""></td>
        </tr>
        <tr style="height:21.00pt;">
            <td class="et5" width="135" style="">
                修改时间
            </td>
            <td class="et3" width="51" style="">
                String
            </td>
            <td class="et3" width="384" style="">
                “2019-01-01 10:10:10”
            </td>
            <td class="et3" width="444" style=""></td>
            <td class="et3" width="180" style=""></td>
        </tr>
        <tr style="height:18.00pt;">
            <td class="et6" width="135" style="">
                修改人
            </td>
            <td class="et4" width="51" style="">
                JSON
            </td>
            <td class="et4" width="384" style="">
                {&quot;_id&quot;: “575ffc5e885898ce0d2afe41”, “name”: “<span class="font0">小云</span><span class="font2">”}</span>
            </td>
            <td class="et4" width="444" style=""></td>
            <td class="et4" width="180" style=""></td>
        </tr>
        <tr style="height:18.00pt;">
            <td class="et6" width="135" style="">
                删除人
            </td>
            <td class="et4" width="51" style="">
                JSON
            </td>
            <td class="et4" width="384" style="">
                {&quot;_id&quot;: “575ffc5e885898ce0d2afe41”, “name”: “<span class="font0">小云</span><span class="font2">”}</span>
            </td>
            <td class="et4" width="444" style=""></td>
            <td class="et4" width="180" style=""></td>
        </tr>
        <tr style="height:21.00pt;">
            <td class="et5" width="135" style="">
                删除时间
            </td>
            <td class="et3" width="51" style="">
                String
            </td>
            <td class="et3" width="384" style="">
                “2019-01-01 10:10:10”
            </td>
            <td class="et3" width="444" style=""></td>
            <td class="et3" width="180" style=""></td>
        </tr>
        <tr style="height:20.00pt;">
            <td class="et5" width="135" style="">
                流程状态（仅流程表单）
            </td>
            <td class="et3" width="51" style="">
                flowState
            </td>
            <td class="et3" width="384" align="right" style="">
                0
            </td>
            <td class="et5" width="444" style="">
                该字段仅流程表单支持。<span class="font2">2</span><span class="font0">表示流程手动结束；</span><span class="font2">1</span><span class="font0">表示流程已结束；</span><span class="font2">0</span><span class="font0">表示流程进行中</span>
            </td>
            <td class="et9"></td>
        </tr>
    </tbody>
</table>

### 数据筛选器
查询多条数据接口同时也支持`过滤`。可通过`filter参数`进行数据过滤。

**筛选参数结构如下：**

<table width="1542" style="width: 828px;">
    <colgroup>
        <col width="199" style="width:149.25pt;"/>
        <col width="483" style="width:362.25pt;"/>
        <col width="723" style="width:542.25pt;"/>
        <col width="652" style="width:489.00pt;"/>
    </colgroup>
    <tbody>
        <tr style="height:14.25pt;" class="firstRow">
            <td width="149" style="">
                参数
            </td>
            <td width="362" style="">
                必需
            </td>
            <td width="542" style="">
                类型
            </td>
            <td width="489" style="">
                说明
            </td>
        </tr>
        <tr style="height:14.25pt;">
            <td style="">
                rel
            </td>
            <td>
                是
            </td>
            <td>
                String
            </td>
            <td>
                筛选组合关系；“and”(满足所有过滤条件), “or”(满足任一过滤条件)
            </td>
        </tr>
        <tr style="height:14.25pt;">
            <td style="">
                cond
            </td>
            <td>
                是
            </td>
            <td>
                [JSON]
            </td>
            <td>
                过滤条件列表
            </td>
        </tr>
    </tbody>
</table>

**过滤条件参数如下：**

<table width="1542" style="width: 828px;">
    <colgroup>
        <col width="199" style="width:149.25pt;"/>
        <col width="483" style="width:362.25pt;"/>
        <col width="723" style="width:542.25pt;"/>
        <col width="652" style="width:489.00pt;"/>
    </colgroup>
    <tbody>
        <tr style="height:14.25pt;" class="firstRow">
            <td width="149" style="">
                参数
            </td>
            <td width="362" style="">
                必需
            </td>
            <td width="542" style="">
                类型
            </td>
            <td width="489" style="">
                说明
            </td>
        </tr>
        <tr style="height:14.25pt;">
            <td style="">
                field
            </td>
            <td>
                是
            </td>
            <td>
                String
            </td>
            <td>
                字段名
            </td>
        </tr>
        <tr style="height:14.25pt;">
            <td style="">
                method
            </td>
            <td>
                是
            </td>
            <td>
                String
            </td>
            <td>
                过滤方法； eq （等于）， ne（不等于）， all（同时包含） ，in（等于任意一个） ，nin（不等于任意一个），like（包含） ，unlike（不包含），empty（为空）， not_empty（不为空）， gt（大于），gte（大于等于），lt（小于）， lte（小于等于），range（选择范围，在x与y之间，并且包含x和y本身）
            </td>
        </tr>
        <tr style="height:14.25pt;">
            <td style="">
                value
            </td>
            <td></td>
            <td>
                Array
            </td>
            <td>
                过滤值
            </td>
        </tr>
         <tr style="height:14.25pt;">
            <td style="">
                hasEmpty
            </td>
            <td></td>
            <td>
                Bool
            </td>
            <td>
                是否未填写
            </td>
        </tr>
    </tbody>
</table>

**目前支持如下字段：**

<table width="1113" style="width: 828px;">
    <colgroup>
        <col width="279" style="width:279px"/>
        <col width="439" style="width:439px"/>
        <col width="395" style="width:395px"/>
    </colgroup>
    <tbody>
        <tr style="height:20px" class="firstRow">
            <td width="279" style="">
                字段类型
            </td>
            <td width="439" style="">
                支持的过滤方式
            </td>
            <td width="395" style="">
                说明
            </td>
        </tr>
        <tr style="height:19px">
            <td style="">
                flowState
            </td>
            <td>
                eq，ne
            </td>
            <td>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 流程状态，仅对流程表单有效
            </td>
        </tr>
        <tr style="height:19px">
            <td style="">
                日期时间/数字/提交时间/更新时间
            </td>
            <td>
                eq，ne，gt，gte，lt，lte，range，empty，not_empty
            </td>
            <td></td>
        </tr>
        <tr style="height:19px">
            <td style="">
                单行文本/下拉框/单选按钮组
            </td>
            <td>
                eq，ne，in，nin，like，unlike，empty，not_empty
            </td>
            <td></td>
        </tr>
        <tr style="height:19px">
            <td style="">
                多行文本
            </td>
            <td>
                like，unlike，empty，not_empty
            </td>
            <td></td>
        </tr>
        <tr style="height:19px">
            <td style="">
                附件/图片/手写签名
            </td>
            <td>
                empty，not_empty
            </td>
            <td></td>
        </tr>
        <tr style="height:19px">
            <td style="">
                定位/地址
            </td>
            <td>
                empty，not_empty，all，nin
            </td>
            <td></td>
        </tr>
        <tr style="height:19px">
            <td style="">
                复选框组/下拉复选框
            </td>
            <td>
                eq，empty，not_empty，all，in
            </td>
            <td></td>
        </tr>
        <tr style="height:19px">
            <td style="">
                成员单选/部门单选/提交人
            </td>
            <td>
                eq，ne，in，nin，empty，not_empty
            </td>
            <td></td>
        </tr>
        <tr style="height:19px">
            <td style="">
                成员多选/部门多选
            </td>
            <td>
                in，all，eq，empty，not_empty
            </td>
            <td></td>
        </tr>
    </tbody>
</table>
	
**筛选示例：**
~~~
{
    "filter": {
        "rel": "and", // 或者 "or"
        "cond": [
            // 过滤条件
            {
                "field": "flowState",
                "method": "eq",
                "value": [1]
            }, {
                "field": "图片",
                "method": "empty"
            }, {
                "field": "单行文本",
                "method": "in",
		  "value": ["apple", "pen"]
            }, {
               "field": "时间",
               "method": "range",
		  "value": ["2019-06-11 00:00:00", "2019-06-28 23:59:59"]
	     }, {
               "field": "多行文本",
               "method": "like",
		  "value": ["ddd"] //包含“ddd”的数据
	     }
        ]
    }
}
~~~

### POST - /api/v1/app/{app_id}/entry/{entry_id}/data_retrieve 查询单条数据接口
按照指定数据ID获取表单中的数据。

**请求参数：**

<table width="1542" style="width: 828px;">
    <colgroup>
        <col width="199" style="width:149.25pt;"/>
        <col width="483" style="width:362.25pt;"/>
        <col width="723" style="width:542.25pt;"/>
        <col width="652" style="width:489.00pt;"/>
    </colgroup>
    <tbody>
        <tr style="height:14.25pt;" class="firstRow">
            <td width="149" style="">
                参数
            </td>
            <td width="362" style="">
                必需
            </td>
            <td width="542" style="">
                类型
            </td>
            <td width="489" style="">
                说明
            </td>
        </tr>
        <tr style="height:14.25pt;">
            <td style="">
                data_id
            </td>
            <td>
                是
            </td>
            <td>
                String
            </td>
            <td>
                数据ID
            </td>
        </tr>
    </tbody>
</table>

**请求示例**：

~~~
POST /api/v1/app/59264073a2a60c0c08e20bfb/entry/59264073a2a60c0c08e20bfd/data_retrieve
  
{
    "data_id": "59e9a2fe283ffa7c11b1ddbf"
}
~~~
**响应参数：**

<table width="1053" style="width: 828px;">
    <colgroup>
        <col width="199" style="width:149.25pt;"/>
        <col width="483" style="width:362.25pt;"/>
        <col width="723" style="width:542.25pt;"/>
    </colgroup>
    <tbody>
        <tr style="height:14.25pt;" class="firstRow">
            <td width="149" style="">
                参数
            </td>
            <td width="362" style="">
                类型
            </td>
            <td width="542" style="">
                说明
            </td>
        </tr>
        <tr style="height:14.25pt;">
            <td style="">
                data
            </td>
            <td>
                JSON
            </td>
            <td>
                单条数据
            </td>
        </tr>
    </tbody>
</table>

**响应数据样例：**
~~~
{
    "data": {
        "appId": "539543cee19942ea8bb5e744",
        "entryId": "50dafd850f3fc191513f2f21",
        "_id": "5bb6e4e013d46e148a9da655",
        "_widget_1558765248187": "张三",
        "聚合表验证数字": 7,
        "多行文本": "百宝云webapi",
        "数字": 7,
        "日期时间": "2019-01-01 10:10:10",
        "单选按钮组": "一年级",
        "复选框组": [
            "选项1",
            "选项2"
        ],
        "下拉复选框": [
            "选项1",
            "选项2"
        ],
        "下拉框": "女",
        "定位": {
            "province": "湖南省",
            "city": "长沙市",
            "district": "芙蓉区",
            "detail": "韶山北路86号鑫天大厦",
            "lnglatXY": [
                113.002864,
                28.199614
            ]
        },
        "地址": {
            "province": "湖南省",
            "city": "长沙市",
            "district": "芙蓉区",
            "detail": "韶山北路86号鑫天大厦"
        },
        "_widget_1558929030197": [
            {
                "name": "私有云介绍.pdf",
                "size": 524288,
                "mime": "application/pdf",
                "url": "http://qiniu.baibaoyun.com/FvXfzy2nqPP12YP5cTeH6bUX4Vp2"
            },
            {
                "name": "定制介绍.pdf",
                "size": 524288,
                "mime": "application/pdf",
                "url": "http://qiniu.baibaoyun.com/FvXfzy2nqPP12YP5cTeH6bUX4Vp2"
            }
        ],
        "图片": [
            {
                "name": "bby.png",
                "size": 3762,
                "mime": "image/png",
                "url": "http://qiniu.baibaoyun.com/FvXfzy2nqPP12YP5cTeH6bUX4Vp2"
            },
            {
                "name": "image2.png",
                "size": 3762,
                "mime": "image/png",
                "url": "http://qiniu.baibaoyun.com/FvXfzy2nqPP12YP5cTeH6bUX4Vp2"
            }
        ],
        "子表单": [
            {
                "子表单单行文本": "张三",
                "子表单多行文本": "百宝云webapi"
            }
        ],
        "_widget_1558929030271": {
            "id": "5b237548b22ab14884086cc0",
            "key": "百宝云"
        },
        "_widget_1558929030284": {
            "name": "signature_1238921858.png",
            "size": 1024,
            "mime": "image/png",
            "url": "http://qiniu.baibaoyun.com/FvXfzy2nqPP12YP5cTeH6bUX4Vp2"
        },
        "成员单选": {
            "_id": "575ffc5e885898ce0d2afe41",
            "name": "小云"
        },
        "成员多选": [
            {
                "_id": "575ffc5e885898ce0d2afe41",
                "name": "小云"
            },
            {
                "_id": "575ffc5e885898ce0d2afe41",
                "name": "小宝"
            }
        ],
        "部门单选": {
            "_id": "59daab24c91306a9239b7ca0",
            "name": "经理部"
        },
        "部门多选": [
            {
                "_id": "59daab24c91306a9239b7ca0",
                "name": "经理部"
            },
            {
                "_id": "59daab24c91306a9239b7ca1",
                "name": "市场部"
            }
        ],
        "creator": {
            "_id": "575ffc5e885898ce0d2afe41",
            "name": "小云"
        },
        "createTime": "2019-01-01 10:10:10",
        "updateTime": "2019-01-01 10:10:10",
        "updater": {
            "_id": "575ffc5e885898ce0d2afe41",
            "name": "小云"
        },
        "deleter": {
            "_id": "575ffc5e885898ce0d2afe41",
            "name": "小云"
        }
    }
}
~~~
### POST - /api/v1/app/{app_id}/entry/{entry_id}/data_create 新建单条数据接口

在指定表单中添加一条数据。

> 请注意： 使用API添加数据时，会触发的事件有新数据提交提醒、聚合表计算&校验、数据量统计。也可以通过请求参数来控制是否发起流程。但是不会触发重复值校验和必填校验。

另外，**系统字段** 和 **以下所列举的控件** `不支持`添加和修改数据：

* 分割线
* 附件、手写签名
* 关联数据、关联查询


**请求参数：**

<table width="1390" style="width: 828px;">
    <colgroup>
        <col width="279" style="width:209.25pt;"/>
        <col width="439" style="width:329.25pt;"/>
        <col width="395" style="width:296.25pt;"/>
        <col width="741" style="width:555.75pt;"/>
    </colgroup>
    <tbody>
        <tr style="height:15.75pt;" class="firstRow">
            <td class="et2" width="328" style="">
                参数
            </td>
            <td class="et2" width="329" style="">
                必需
            </td>
            <td class="et2" width="296" style="">
                类型
            </td>
            <td class="et2" width="555" style="">
                说明
            </td>
        </tr>
        <tr style="height:15.75pt;">
            <td class="et3" width="209" style="">
                data
            </td>
            <td class="et4" width="329" style="">
                是
            </td>
            <td class="et3" width="296" style="">
                JSON
            </td>
            <td class="et4" width="555" style="">
                数据内容
            </td>
        </tr>
        <tr style="height:15.75pt;">
            <td class="et5" width="209" style="">
                is_start_workflow
            </td>
            <td class="et5" width="329" style="">否</td>
            <td class="et5" width="296" style="">
                Boolean
            </td>
            <td class="et7" width="555" style="">
                用来控制是否触发流程，默认不触发流程
            </td>
        </tr>
        <tr style="height:15.75pt;">
            <td class="et3" width="209" style="">
                is_start_event
            </td>
            <td class="et3" width="329" style="">否</td>
            <td class="et3" width="296" style="">
                Boolean
            </td>
            <td class="et4" width="555" style="">
                是否触发事件（模块事件<span class="font2">/_form</span><span class="font0">事件）</span>
            </td>
        </tr>
        <tr style="height:14.25pt;">
            <td style="">
                operator
            </td>
            <td>否</td>
            <td>
                String
            </td>
            <td>
                操作人_id，默认使用应用所有者的_id
            </td>
        </tr>
    </tbody>
</table>

**请求示例：**
~~~
{
    "data": {
        "_widget_1558765248187": "张三",
        "聚合表验证数字": 8,
        "多行文本": "百宝云webapi",
        "数字": 8,
        "日期时间": "2019-01-01 11:11:11",
        "单选按钮组": "一年级",
        "复选框组": [
            "选项1",
            "选项2"
        ],
        "下拉复选框": [
            "选项1",
            "选项2"
        ],
        "下拉框": "女",
        "定位": {
            "province": "湖南省",
            "city": "长沙市",
            "district": "芙蓉区",
            "detail": "韶山北路",
            "lnglatXY": [
                112.99627,
                28.19393
            ]
        },
        "地址": {
            "province": "湖南省",
            "city": "长沙市",
            "district": "芙蓉区",
            "detail": "韶山北路"
        },
        "图片": [
            "https://doc.baibaoyun.com/static/index/images/tu_1_03.png",
            "https://www.baibaoyun.com/static/index/images/tu_1_03.png"
        ],
        "子表单": [
            {
                "子表单单行文本": "张三",
                "子表单多行文本": "百宝云webapi"
            },
	    {
                "子表单单行文本": "李四",
                "子表单多行文本": "百宝云"
            }
        ],
        "成员单选": "5af263d45e67aaf5b09033c7",
        "成员多选": [
            "5af263d45e67aaf5b09033c7",
            "5af263d45e67aaf5b09033c9"
        ],
        "部门单选": "5af263d45e67aaf5b09033c7",
        "部门多选": [
            "5af263d45e67aaf5b09033c7",
            "5af263d45e67aaf5b09033c9"
        ]
    },
    "is_start_workflow": true,
    "is_start_event": true,
    "operator": ""
}
~~~

**响应参数**

<table width="444">
    <colgroup>
        <col width="155" style="width:116.25pt;"/>
        <col width="43" style="width:32.25pt;"/>
        <col width="395" style="width:296.25pt;"/>
    </colgroup>
    <tbody>
        <tr style="height:14.25pt;" class="firstRow">
            <td width="116" style="">
                参数
            </td>
            <td width="32" style="">
                类型
            </td>
            <td width="296" style="">
                说明
            </td>
        </tr>
        <tr style="height:14.25pt;">
            <td style="">
                data
            </td>
            <td>
                JSON
            </td>
            <td>
                返回提交后的完整数据，内容同查询单条数据接口
            </td>
        </tr>
    </tbody>
</table>

**响应数据样例**

~~~
{
    "data": {}
}
~~~

### POST - /api/v1/app/{app_id}/entry/{entry_id}/data_update 修改单条数据接口
按照指定数据ID修改表单中的数据。

> 请注意： 使用API修改数据时，会触发的事件有聚合表计算&校验、数据量统计。不进行重复值校验、必填校验等。

**请求参数：**

<table width="1390" style="width: 828px;">
    <colgroup>
        <col width="279" style="width:209.25pt;"/>
        <col width="439" style="width:329.25pt;"/>
        <col width="395" style="width:296.25pt;"/>
        <col width="741" style="width:555.75pt;"/>
    </colgroup>
    <tbody>
        <tr style="height:15.75pt;" class="firstRow">
            <td class="et2" width="209" style="">
                参数
            </td>
            <td class="et2" width="329" style="">
                必需
            </td>
            <td class="et2" width="296" style="">
                类型
            </td>
            <td class="et2" width="555" style="">
                说明
            </td>
        </tr>
        <tr style="height:15.75pt;">
            <td class="et3" width="209" style="">
                data_id
            </td>
            <td class="et4" width="329" style="">
                是
            </td>
            <td class="et3" width="296" style="">
                String
            </td>
            <td class="et4" width="555" style="">
                数据<span class="font2">ID</span>
            </td>
        </tr>
        <tr style="height:15.75pt;">
            <td class="et5" width="209" style="">
                data
            </td>
            <td class="et6" width="329" style="">
                是
            </td>
            <td class="et5" width="296" style="">
                JSON
            </td>
            <td class="et6" width="555" style="">
                数据内容，同数据提交
            </td>
        </tr>
        <tr style="height:15.75pt;">
            <td class="et3" width="209" style="">
                is_start_event
            </td>
            <td class="et4" width="329" style="">
                否
            </td>
            <td class="et3" width="296" style="">
                Boolean
            </td>
            <td class="et4" width="555" style="">
                是否触发事件（模块事件<span class="font2">/_form</span><span class="font0">事件）</span>
            </td>
        </tr>
        <tr style="height:14.25pt;">
            <td style="">
                operator
            </td>
            <td>
                否
            </td>
            <td>
                String
            </td>
            <td>
                操作人_id，默认使用应用所有者的_id
            </td>
        </tr>
    </tbody>
</table>


**请求示例：**
~~~
{
    "data_id": "59264073a2a60c0c08e20bfb",
    "data": {}
}
~~~

**响应参数：**

<table width="444">
    <colgroup>
        <col width="155" style="width:116.25pt;"/>
        <col width="43" style="width:32.25pt;"/>
        <col width="395" style="width:296.25pt;"/>
    </colgroup>
    <tbody>
        <tr style="height:14.25pt;" class="firstRow">
            <td width="116" style="">
                参数
            </td>
            <td width="92" style="">
                类型
            </td>
            <td width="296" style="">
                说明
            </td>
        </tr>
        <tr style="height:14.25pt;">
            <td style="">
                data
            </td>
            <td>
                JSON
            </td>
            <td>
                返回修改后的新数据，内容同查询单条数据接口
            </td>
        </tr>
    </tbody>
</table>

**响应数据样例：**
~~~
{
    "data": {}
}
~~~
### POST - /api/v1/app/{app_id}/entry/{entry_id}/data_delete 删除单条数据接口
按照指定数据ID从表单中删除数据，删除的数据进入回收站。

**请求参数：**

<table width="1390" style="width: 828px;">
    <colgroup>
        <col width="279" style="width:209.25pt;"/>
        <col width="439" style="width:329.25pt;"/>
        <col width="395" style="width:296.25pt;"/>
        <col width="741" style="width:555.75pt;"/>
    </colgroup>
    <tbody>
        <tr style="height:15.75pt;" class="firstRow">
            <td class="et2" width="209" style="">
                参数
            </td>
            <td class="et2" width="329" style="">
                必需
            </td>
            <td class="et2" width="296" style="">
                类型
            </td>
            <td class="et2" width="555" style="">
                说明
            </td>
        </tr>
        <tr style="height:15.75pt;">
            <td class="et3" width="209" style="">
                data_id
            </td>
            <td class="et4" width="329" style="">
                是
            </td>
            <td class="et3" width="296" style="">
                String
            </td>
            <td class="et4" width="555" style="">
                数据<span class="font2">ID</span>
            </td>
        </tr>
        <tr style="height:15.75pt;">
            <td class="et5" width="209" style="">
                is_start_event
            </td>
            <td class="et4" width="329" style="">
                否
            </td>
            <td class="et5" width="296" style="">
                Boolean
            </td>
            <td class="et6" width="555" style="">
                是否触发事件（模块事件<span class="font2">/_form</span><span class="font0">事件）</span>
            </td>
        </tr>
        <tr style="height:15.00pt;">
            <td style="">
                operator
            </td>
            <td class="et4" width="329" style="">
                否
            </td>
            <td>
                String
            </td>
            <td>
                操作人_id，默认使用应用所有者的_id
            </td>
        </tr>
    </tbody>
</table>


**响应数据样例：**
~~~
{
    "status": "success"
}
~~~
## 控件与数据类型对照表

<table width="1323" style="width: 828px;">
    <colgroup>
        <col width="160" style="width:160px"/>
        <col width="174" style="width:174px"/>
        <col width="255" style="width:255px"/>
        <col width="468" style="width:468px"/>
        <col width="266" style="width:266px"/>
    </colgroup>
    <tbody>
        <tr style="height:36px" class="firstRow">
            <td width="160" style="">
                控件名称
            </td>
            <td width="174" style="">
                控件类型
            </td>
            <td width="255" style="">
                数据类型
            </td>
            <td width="468" style="">
                数据样例
            </td>
            <td width="266" style="">
                备注
            </td>
        </tr>
        <tr style="height:33px">
            <td width="160" style="">
                单行文本
            </td>
            <td width="174" style="">
                text
            </td>
            <td width="255" style="">
                String
            </td>
            <td width="468" style="">
                “张三”
            </td>
            <td width="266" style=""></td>
        </tr>
        <tr style="height:32px">
            <td width="160" style="">
                多行文本
            </td>
            <td width="174" style="">
                textarea
            </td>
            <td width="255" style="">
                String
            </td>
            <td width="468" style="">
                “百宝云webapi”
            </td>
            <td width="266" style=""></td>
        </tr>
        <tr style="height:24px">
            <td width="160" style="">
                数字
            </td>
            <td width="174" style="">
                number
            </td>
            <td width="255" style="">
                Number
            </td>
            <td width="468" style="">
                7
            </td>
            <td width="266" style=""></td>
        </tr>
        <tr style="height:24px">
            <td width="160" style="">
                日期时间
            </td>
            <td width="174" style="">
                datetime
            </td>
            <td width="255" style="">
                String
            </td>
            <td width="468" style="">
                “2019-01-01 11:10:11”
            </td>
            <td width="266" style=""></td>
        </tr>
        <tr style="height:24px">
            <td width="160" style="">
                单选按钮组
            </td>
            <td width="174" style="">
                radiogroup
            </td>
            <td width="255" style="">
                String
            </td>
            <td width="468" style="">
                “一年级”
            </td>
            <td width="266" style=""></td>
        </tr>
        <tr style="height:24px">
            <td width="160" style="">
                复选框组
            </td>
            <td width="174" style="">
                checkboxgroup
            </td>
            <td width="255" style="">
                Array
            </td>
            <td width="468" style="">
                [“选项1”,“选项2”]
            </td>
            <td width="266" style=""></td>
        </tr>
        <tr style="height:24px">
            <td width="160" style="">
                下拉框
            </td>
            <td width="174" style="">
                combo
            </td>
            <td width="255" style="">
                String
            </td>
            <td width="468" style="">
                “女”
            </td>
            <td width="266" style=""></td>
        </tr>
        <tr style="height:24px">
            <td width="160" style="">
                下拉复选框
            </td>
            <td width="174" style="">
                combocheck
            </td>
            <td width="255" style="">
                Array
            </td>
            <td width="468" style="">
                [“选项1”,“选项2”]
            </td>
            <td width="266" style=""></td>
        </tr>
        <tr style="height:47px">
            <td width="160" style="">
                地址
            </td>
            <td width="174" style="">
                address
            </td>
            <td width="255" style="">
                JSON
            </td>
            <td width="468" style="">
                {province: &quot;湖南省&quot;, city: &quot;长沙市&quot;, district: &quot;芙蓉区&quot;, detail: &quot;袁家岭&quot;}
            </td>
            <td width="266" style=""></td>
        </tr>
        <tr style="height:47px">
            <td width="160" style="">
                定位
            </td>
            <td width="174" style="">
                location
            </td>
            <td width="255" style="">
                JSON
            </td>
            <td width="468" style="">
                {province: &quot;湖南省&quot;, city: &quot;长沙市&quot;, district: &quot;芙蓉区&quot;, detail: &quot;袁家岭&quot;, lnglatXY: [113.002864, 28.199614]}
            </td>
            <td width="266" style="">
                lnglatXY表示[经度, 纬度]
            </td>
        </tr>
        <tr style="height:162px">
            <td width="160" style="">
                图片
            </td>
            <td width="174" style="">
                image
            </td>
            <td width="255" style="">
                Array
            </td>
            <td width="468" style="">
                [ { &quot;name&quot;: &quot;img.png&quot;, &quot;size&quot;: 3762, &quot;mime&quot;: &quot;image/png&quot;, &quot;url&quot;: &quot;https://qiniu.baibaoyun.com/FvXfzy2nqPP12YP5cTeH6bUX4Vp2&quot; }, { &quot;name&quot;: &quot;img1.png&quot;, &quot;size&quot;: 3762, &quot;mime&quot;: &quot;image/png&quot;, &quot;url&quot;: &quot;https://qiniu.baibaoyun.com/FvXfzy2nqPP12YP5cTeH6bUX4Vp2&quot; } ]
            </td>
            <td width="266" style="">
                数据中包含的url为图片链接
            </td>
        </tr>
        <tr style="height:162px">
            <td width="160" style="">
                附件
            </td>
            <td width="174" style="">
                upload
            </td>
            <td width="255" style="">
                Array
            </td>
            <td width="468" style="">
                [ { &quot;name&quot;: &quot;接口.pdf&quot;, &quot;size&quot;: 37602, &quot;mime&quot;: &quot;application/pdf&quot;, &quot;url&quot;: &quot;https://qiniu.baibaoyun.com/FvXfzy2nqPP12YP5cTeH6bUVp2&quot; }, { &quot;name&quot;: &quot;百宝云.pdf&quot;, &quot;size&quot;: 37602, &quot;mime&quot;: &quot;application/pdf&quot;, &quot;url&quot;: &quot;https://qiniu.baibaoyun.com/FvXfzy2nqPP12YP5cTeH6X4Vp2&quot; } ]
            </td>
            <td width="266" style="">
                数据中包含的url为附件链接
            </td>
        </tr>
        <tr style="height:24px">
            <td width="160" style="">
                子表单
            </td>
            <td width="174" style="">
                subform
            </td>
            <td width="255" style="">
                Array
            </td>
            <td width="468" style=""></td>
            <td width="266" style=""></td>
        </tr>
        <tr style="height:47px">
            <td width="160" style="">
                关联数据
            </td>
            <td width="174" style="">
                linkdata
            </td>
            <td width="255" style="">
                JSON
            </td>
            <td width="468" style="">
                {“id”:“5b237548b22ab14884086cc0”,“key”:“接口”}
            </td>
            <td width="266" style="">
                id表示所关联数据的ID；key表示主键字段的值
            </td>
        </tr>
        <tr style="height:70px">
            <td width="160" style="">
                手写签名
            </td>
            <td width="174" style="">
                signature
            </td>
            <td width="255" style="">
                JSON
            </td>
            <td width="468" style="">
                {“name”:“signature_1238921857.png”,“size”:1024,“mime”:“image/png”,“url”:“https://qiniu.baibaoyun.com/FvXfzy2nqPP12YP5cTeH6X4p2”}
            </td>
            <td width="266" style="">
                数据中包含的url为手写签名的图片链接
            </td>
        </tr>
        <tr style="height:47px">
            <td width="160" style="">
                成员单选
            </td>
            <td width="174" style="">
                user
            </td>
            <td width="255" style="">
                JSON
            </td>
            <td width="468" style="">
                { &quot;name&quot;: &quot;小云&quot;, &quot;_id&quot;: &quot;55cb7d57f7a190e382857189&quot; }
            </td>
            <td width="266" style="">
                成员信息中_id表示百宝云中的用户id；name表示用户昵称
            </td>
        </tr>
        <tr style="height:47px">
            <td width="160" style="">
                成员多选
            </td>
            <td width="174" style="">
                usergroup
            </td>
            <td width="255" style="">
                Array
            </td>
            <td width="468" style="">
                [ { &quot;name&quot;: &quot;小云&quot;, &quot;_id&quot;: &quot;55cb7d57f7a190e382857189&quot; }, { &quot;name&quot;: &quot;小宝&quot;, &quot;_id&quot;: &quot;575ffc5e885898ce0d2af791&quot; } ]
            </td>
            <td width="266" style=""></td>
        </tr>
        <tr style="height:24px">
            <td width="160" style="">
                部门单选
            </td>
            <td width="174" style="">
                dept
            </td>
            <td width="255" style="">
                JSON
            </td>
            <td width="468" style="">
                &nbsp;{ &quot;name&quot;: &quot;销售部&quot;, &quot;_id&quot;: &quot;59daab24c91306a9239b7ca0&quot; }
            </td>
            <td width="266" style=""></td>
        </tr>
        <tr style="height:47px">
            <td width="160" style="">
                部门多选
            </td>
            <td width="174" style="">
                deptgroup
            </td>
            <td width="255" style="">
                Array
            </td>
            <td width="468" style="">
                [ { &quot;name&quot;: &quot;销售部&quot;, &quot;_id&quot;: &quot;59daab24c91306a9239b7ca0&quot; }, { &quot;name&quot;: &quot;人事部&quot;, &quot;_id&quot;: &quot;5014a86b688ff0ec55a946d9&quot; } ]
            </td>
            <td width="266" style=""></td>
        </tr>
    </tbody>
</table>

## API操作关联关系

<table width="413">
    <colgroup>
        <col width="198" style="width:148.50pt;"/>
        <col width="98" style="width:73.50pt;"/>
        <col width="183" style="width:137.25pt;"/>
        <col width="72" style="width:54.00pt;"/>
    </colgroup>
    <tbody>
        <tr style="height:16.50pt;" class="firstRow">
            <td width="148" style="">-</td>
            <td class="et2" width="73" style="">
                create
            </td>
            <td class="et2" width="137" style="">
                update
            </td>
            <td class="et2" width="54" style="">
                delete
            </td>
        </tr>
        <tr style="height:18.00pt;">
            <td class="et3" width="148" style="">
                数据消息推送
            </td>
            <td class="et3" width="73" style="">
                记录
            </td>
            <td class="et3" width="137" style="">
                记录
            </td>
            <td class="et3" width="54" style="">
                不记录
            </td>
        </tr>
        <tr style="height:18.00pt;">
            <td class="et4" width="148" style="">
                触发聚合表
            </td>
            <td class="et4" width="73" style="">
                记录
            </td>
            <td class="et4" width="137" style="">
                记录
            </td>
            <td class="et4" width="54" style="">
                记录
            </td>
        </tr>
		 <tr style="height:18.00pt;">
            <td class="et4" width="148" style="">
                数据动态
            </td>
            <td class="et4" width="73" style="">
                记录
            </td>
            <td class="et4" width="137" style="">
                记录
            </td>
            <td class="et4" width="54" style="">
                记录
            </td>
        </tr>
        <tr style="height:18.00pt;">
            <td class="et3" width="148" style="">
                事件/模块
            </td>
            <td class="et3" width="73" style="">
                可记录
            </td>
            <td class="et3" width="137" style="">
                可记录
            </td>
            <td class="et3" width="54" style="">
                可记录
            </td>
        </tr>
        <tr style="height:18.00pt;">
            <td class="et4" width="148" style="">
                重复值校验
            </td>
            <td class="et4" width="73" style="">
                不校验
            </td>
            <td class="et4" width="137" style="">
                不校验
            </td>
            <td class="et4" width="54" style="">
                -
            </td>
        </tr>
        <tr style="height:18.00pt;">
            <td class="et3" width="148" style="">
                表单校验
            </td>
            <td class="et3" width="73" style="">
                不校验
            </td>
            <td class="et3" width="137" style="">
                不校验
            </td>
            <td class="et3" width="54" style="">
                -
            </td>
        </tr>
        <tr style="height:18.00pt;">
            <td class="et4" width="148" style="">
                必填校验
            </td>
            <td class="et4" width="73" style="">
                不校验
            </td>
            <td class="et4" width="137" style="">
                不校验
            </td>
            <td class="et4" width="54" style="">
                -
            </td>
        </tr>
        <tr style="height:18.00pt;">
            <td class="et3" width="148" style="">
                流程节点校验
            </td>
            <td class="et3" width="73" style="">
                不校验
            </td>
            <td class="et3" width="137" style="">
                不校验
            </td>
            <td class="et3" width="54" style="">
                -
            </td>
        </tr>
        <tr style="height:18.00pt;">
            <td class="et4" width="148" style="">
                触发流程
            </td>
            <td class="et4" width="73" style="">
                可记录
            </td>
            <td class="et4" width="137" style="">
                不记录
            </td>
            <td class="et4" width="54" style="">
                -
            </td>
        </tr>
        <tr style="height:18.00pt;">
            <td class="et3" width="148" style="">
                聚合表校验
            </td>
            <td class="et3" width="73" style="">
                校验
            </td>
            <td class="et3" width="137" style="">
                校验
            </td>
            <td class="et3" width="54" style="">
                校验
            </td>
        </tr>
        <tr style="height:18.00pt;">
            <td class="et4" width="148" style="">
                字段联动、公式
            </td>
            <td class="et4" width="73" style="">
                不记录
            </td>
            <td class="et4" width="137" style="">
                不记录
            </td>
            <td class="et4" width="54" style="">
                -
            </td>
        </tr>
    </tbody>
</table>
